<DOCTYPE >
<html>
        <head>
            <style>
                /* body {
                  color: red;
                } */
            </style>
            <title>
                Biến trong C/C++
            </title>
        </head>

        <body>
            <h1>Biến static</h1>
            <p>Khi một biến được khai báo với từ khóa static, vùng nhớ cho nó tồn tại theo vòng đời của chương trình. Ngay cả khi hàm được gọi nhiều lần, vùng nhớ cho biến static chỉ được cấp nhát một lần và giá trị của biến trong những lần gọi trước đó được lưu lại và được sử dụng để thực hiện thông qua các lượt gọi hàm tiếp theo. Điều này rất hữu ích để triển khai các ứng dụng nào khác mà trạng thái chức năng trước đó cần được lưu trữ.</p>
            <p> Nếu ta gán 1 con trỏ là địa chỉ của biến static và ta đổi giá trị con trỏ thì giá trị biến static cũng đổi</p>
            <p>Nếu ta trả về 1 kiểu con trỏ thì khi trả về cần thêm chữ static tại giá trị muốn trả về</p>
            <h1>Biến extern</h1>
            <p>Trong C, khi 1 biến đi sau từ khóa “extern” có nghĩa là:</p>
            <ul>
                <li>Nó là tham chiếu của một biến,hàm cùng tên nào đó, đã được định nghĩa bên ngoài. 
                Nó chỉ khai báo chứ không định nghĩa ( cấp phát bộ nhớ cho biến ).</li>
                <li>Biến được tham chiếu phải được khai báo ở cấp độ cao nhất (toàn cục), và có thể nằm trong một file khá</li>
            </ul>
            <h1> Volatile</h1>
            <p>Từ khóa volatile được sử dụng để đánh dấu một biến sẽ được lưu trữ trong main memory. Nghĩa là mọi lệnh đọc giá trị các biến volatile đều đọc từ main menory chứ không phải đọc từ CPU cache, việc ghi giá trị cho các biến volatile cũng tương tự sẽ ghi xuống main memory.</p>
            <p>Trong ứng dụng đa luồng (multithread) khi mỗi luồng(thread) làm việc với các biến non-volatile(không có chứa từ khóa volatile) mỗi thread có thể sao chép chúng từ main memory vào CPU cache để thao tác giúp tăng performance. Nếu máy tính của bạn có nhiều CPU thì có thể mỗi thread sẽ chạy trên một CPU khác nhau đồng nghĩa với việc mỗi thread sẽ sao chép các biến vào CPU cache riêng của chúng.</p>
            <p></p><img src="images/volatile1.jpg"></p>
            <p>Với các biến non-volatile thì chúng ta sẽ không đảm bảo rằng khi  đọc dữ liệu từ main memory vào cpu cache và ghi dữ liệu từ CPU cache vào main memory. Chính vì thế giá trị của biến non-volatile có thể khác nhau ở từng thread và giá trị của chúng ở main memory cũng ko đảm bảo tính đồng nhất.</p>
            <p>Giả sử thread 1 sẽ là thread tăng biến counter lên 1 và thread 2 đọc và xử lý. Nếu counter không phải là một volatile biến thì giá trị counter ở thread 1, main memory và thread 2 có khả năng sẽ khác nhau hoàn toàn</p>
            <p></p><img src="../images/volatile2.jpg"></p>
        </body>
</html>
