<DOCTYPE >
    <html>
            <head>
                <style>
                    /* body {
                      color: red;
                    } */
                </style>
                <title>
                    Marco, Inline, Function
                </title>
            </head>
    
            <body>
                <ol>
                    <h1><li>Marco</li></h1>
                    <ul>
                        <li>Được xử lý bởi preprocessor</li>
                        <li> Thay thế đoạn code được khai báo macro vào bất cứ chỗ nào xuất hiện macro đó</li>  
                        <p>VD: #define SUM(a,b)     (a+b)<br>
                            Preprocessor khi gặp bất kỳ lời gọi SUM(first+last) nào thì thay ngay bằng (first+last)
                        </p>
                    </ul>
                    <h1><li>Inline</li></h1>
                    <ul>
                        <li>Được xử lý bởi compiler</li>
                        <li>Được khai báo với từ khóa "inline"</li>
                        <li>Khi compiler thấy bất kỳ chỗ nào xuất hiện inline function, nó sẽ thay thế chỗ đó bởi định nghĩa của hàm đã được compile tương ứng.
                             –> Phần được thay thế không phải code mà là đoạn code đã được compile</li>
                    </ul>
                    <h1><li>Function</li></h1>
                    <ul>
                        <li>Khi thấy hàm được gọi, compiler sẽ phải lưu con trỏ chương trình PC hiện tại vào stack; chuyển PC tới hàm được gọi, 
                            thực hiện hàm đó xong và lấy kết quả trả về; 
                            sau đó quay lại vị trí ban đầu trong stack trước khi gọi hàm và tiếp tục thực hiện chương trình.
                        </li>
                        <li>
                            Như có thể thấy, các này khiến chương trình tốn thời gian hơn là chỉ cần thay thế đoạn code đã được compile (cách của inline function)
                        </li>
                    </ul>
                    <h1><li>So sánh</li></h1>
                    <ul>
                        <li>
                            Macro đơn giản là chỉ thay thế đoạn code macro vào chỗ được gọi trước khi được biên dịch
                        </li>
                        <li>
                            Inline thay thế đoạn mã code đã được biên dịch vào chỗ được gọi
                        </li>
                        <li>
                            Hàm bình thường phải tạo một function call, lưu địa chỉ trước khi gọi hàm vào stack sau đó mới thực hiện hàm và sau cùng là quay trở về địa chỉ trên stack trước khi gọi hàm và thực hiện tiếp chương trình
                        </li>
                        <li>
                            Macro khiến code trở nên dài hơn rất nhiều so với bình thường nhưng thời gian chạy nhanh.
                        </li>
                        <li>
                            Macro khiến code trở nên dài hơn rất nhiều so với bình thường. Đồng thời nó còn xuất hiện một số lỗi: Không xác định đúng thứ tự ưu tiến
                        </li>
                        <li>
                            Hàm inline cũng khiến code dài hơn, tuy nhiên nó làm giảm thời gian chạy chương trình
                        </li>
                        <li>
                            Hàm bình thường sẽ phải gọi function call nên tốn thời gian hơn inline function nhưng code ngắn gọn hơn.
                        </li>
                        <img src="../images/Marco_Inline_Function/Marco_Inline_Function.png">
                    </ul>
                </ol>
                
                
            </body>
    </html>